%% There are 0 mstm output files in this directory
%% Initialize variables.
filename = '/256/x9598/171/009/mt*.dat';
startRow = 52;
endRow = 232;

%% Format string for each line of text:

formatSpec = '%8f%13f%13f%13f%13f%13f%13f%13f%13f%13f%f%[^\n\r]';

%% Open the text file.
fileID = fopen(filename,'r');

%% Read columns of data according to format string.
textscan(fileID, '%[^\n\r]', startRow-1, 'WhiteSpace', '', 'ReturnOnError', false);
dataArray = textscan(fileID, formatSpec, endRow-startRow+1, 'Delimiter', '', 'WhiteSpace', '', 'ReturnOnError', false);

%% Close the text file.
fclose(fileID);

%% Allocate imported array to column variable names
theta = dataArray{:, 1};
m256x9598171009mt*_S_11 = dataArray{:, 2}; % Exm: 640336_S_1_11 = dataArray{:, 2}
m256x9598171009mt*_S_12 = dataArray{:, 3}; % Exm: 640336_S_1_11 = dataArray{:, 3}
m256x9598171009mt*_S_13 = dataArray{:, 4};
m256x9598171009mt*_S_14 = dataArray{:, 5};
m256x9598171009mt*_S_22 = dataArray{:, 6};
m256x9598171009mt*_S_23 = dataArray{:, 7};
m256x9598171009mt*_S_24 = dataArray{:, 8};
m256x9598171009mt*_S_33 = dataArray{:, 9};
m256x9598171009mt*_S_34 = dataArray{:, 10};
m256x9598171009mt*_S_44 = dataArray{:, 11}; 

%% Clear temporary variables
clearvars filename startRow endRow formatSpec fileID dataArray ans;
%AVARAGING ALL COMPONENTS
S11avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_11 )./ 0 
s12avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_12 )./ 0 
S13avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_13 )./ 0 
S14avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_14 )./ 0 
S22avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_22 )./ 0 
S23avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_23 )./ 0 
S24avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_24 )./ 0 
S33avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_33 )./ 0 
S34avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_34 )./ 0 
S44avg25695981300061300226130091303150006150022615009150317100226171009= ( m256x9598171009mt*_S_44 )./ 0
 %Plots 
theta=[0:180]
theta=theta'
figure1= figure
plot(theta,S1125695981300061300226130091303150006150022615009150317100226171009,'b')
hold on
title('Phase Function - N= 256 Xm= 9598 nr= 171 ni= 009 ' )
hold off

pol25695981300061300226130091303150006150022615009150317100226171009=-s12avg25695981300061300226130091303150006150022615009150317100226171009
figure2= figure
plot(theta,pol25695981300061300226130091303150006150022615009150317100226171009,'b')
hold on
title('Linear Polarization - N= 256 Xm= 9598 nr= 171 ni= 009' )
hold off
maxpol25695981300061300226130091303150006150022615009150317100226171009=max(pol25695981300061300226130091303150006150022615009150317100226171009) 
